<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/fontawesome.css">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,400;1,300&amp;display=swap"
        rel="stylesheet">
    <title>creat user 2</title>
</head>

<body>
    <section class="application-layout">
        <div class="application-tittle">
            <h1>User-Account</h1>
            <button class="btn" onclick="creatUser(true)">Craet User</button>
        </div>
        <section id="userList" class="user-list">
            <!-- <div class="user" onclick="myProfile(this)">
                <i class="fa fa-user" aria-hidden="true"></i>
                <img src="img/aarti.jpg">
                <p>My Profile</p>
            </div>
            <div class="user">
                <input type="text" name="search" placeholder="search" class="search" />
            </div> -->
            <!-- <div class="user-list-heading">
                    <p>User List</h2>
                </div> -->
            <div class="list-parent"></div>
        </section>
        <section class="display-area">
            <!-- my profile details -->
            <div class="userProfile">
            </div>
            <div class="my-profile">
                <i class="fas fa-user-edit user-edit" onclick="edit()"></i>
                <div>
                    <img src="img/aarti.jpg">
                    <h2>aarti Jagdale</h2>
                    <p>student</p>
                    <button class="btn" onclick="goBack(true)">Go Back</button>
                </div>
            </div>
            <!--end my profilr details  -->
            <!-- display user details -->

        </section>
        <section class="login-form">
            <div>
                <h2>Login</h2>
                <label>Name</label>
                <input type="text" name="name" id="user-name" />
                <label>Email Address </label>
                <input type="text" name="email" id="user-email" />
                <label>profession</label>
                <!-- <input type="text" name="" id="user-profession" /> -->
                <select id="user-profession">
                    <option>select your profession</option>
                    <option>Student</option>
                    <option>web Devloper</option>
                    <option>Software Engineer</option>
                    <option>Teacher</option>
                    <option>Indian Army</option>
                    <option>Acter</option>
                </select>
                <label>Contact No</label>
                <input type="number" id="user-contact">
                <label>password</label>
                <input type="password" name="password" id="user-password" />
                <div class="btn-parent">
                    <button class="btn" id="submit" onclick="CreatUserList()">submit</button>
                    <button class="btn" onclick="goBack()">Go Back</button>
                </div>
            </div>
        </section>
        <!-- <div class="userProfile"></div> -->

    </section>
    <!-- scripting -->
    <script>
        const userList = document.getElementById("userList");
        const loginForm = document.querySelector(".login-form");
        const userProfile = document.querySelector(".userProfile");
        const myprofile = document.querySelector(".my-profile");
        const user = document.querySelector(".user");
        const input = document.querySelectorAll(".login-form input")
        const parentUserList = document.querySelector(".list-parent");
        const userName = document.getElementById("user-name");
        const userEmail = document.getElementById("user-email");
        const userprofession = document.getElementById("user-profession");
        const userpassword = document.getElementById("user-password");
        const userContact = document.getElementById("user-contact");
        // var x = userEmail.value.indexOf("@");
        const submit = document.getElementById("submit");
        // const userProfile = document.querySelector(".userProfile");

        function creatUser(y) {

            userList.style.display = "none";
            userProfile.style.display = "none";
            myprofile.style.display = "none";
            loginForm.style.display = "block";

        }

        // goBack button
        function goBack(x) {
            // const loginForm = document.querySelector(x);
            if (x == true) {
                userProfile.style.display = "none";
                userList.style.display = "inline-block";
                myprofile.style.display = "none";

            } else {
                userList.style.display = "inline-block";
                loginForm.style.display = "none";
            }
        }

        // function myProfile(el) {
        //     myprofile.style.display = "inline-block";
        // }

        // creat user display in user list
        var userData = [];
        var count = 0;
        function CreatUserList() {
            var isFormValid = formValidation();
            if (isFormValid === true) {
                creatList();
            }
        }

        // form validation
        function formValidation() {
            var x = userEmail.value.indexOf("@");

            if (userName.value == "") {
                alert("name can't be empty")
                return false;
            }
            else if (x < 3) {
                alert("enter valid email address")
                return false;
            }
            else if (userprofession.value == "") {
                alert("profession can't be empty")
                return false;
            }
            else if (userprofession.value == "") {
                alert("profession can't be empty")
                return false;
            }
            else if (userContact.length < 9) {
                alert("must be 10 digit long contact number")
                return false;
            }
            else {
                alert("your succesfully login !! welcome ")
                return true;
            }
        }

        function creatList() {
            var obj = {};
            obj.name = userName.value;
            obj.email = userEmail.value;
            obj.profession = userprofession.value;
            obj.contact = userContact.value;
            userData.push(obj);
            // var data = userData[count]
            var Ulist = document.createElement("div");
            Ulist.innerHTML = "<i class='fa fa-user user-font' aria-hidden='true'></i>" +
                "<p id='user-display-name'>" + obj.name + "</p>";
            // "<i class='fas fa-trash-alt delet-user' onclick='deletUser(this)'></i>";
            Ulist.classList.add("user")
            parentUserList.append(Ulist);
            for (i = 0; i < input.length; i++) {
                input[i].value = "";
            }
            userList.style.display = "inline-block";
            loginForm.style.display = "none";

            // this function for display user profile
            Ulist.addEventListener("click", function () {
                // userList.style.display = "none";
                userProfile.style.display = "inline-block";
                var indexNo = userData.indexOf(obj);
                userProfile.innerHTML =
                    "<i class='fas fa-trash-alt user-edit' onclick='deletUser(" + indexNo + ")'></i>" +
                    "<i class='fas fa-user-edit user-edit' onclick='edit(" + indexNo + ")'></i>" +
                    "<i class='fa fa-user profile-font' aria-hidden='true'></i>" +
                    "<h2>" + obj.name + "</h2>" +
                    "<p id='profession'>" + obj.profession + "</p>" +
                    "<p id='email'>" + obj.email + "</p>" +
                    "<p id ='contact'>" + obj.contact + "</p>" +
                    "<button class='btn' onclick='goBack(true)'>Go Back</button>";
            })
        }

        function edit(indexNo) {
            // save editaed data here
            var editedData = userData[indexNo];

            var saveBtn = document.createElement("span");
            saveBtn.innerHTML = "<button class='save-btn btn'>save</button>"
            userProfile.append(saveBtn);
        
            var ProfileName = userProfile.querySelector("h2");
            var prfileProfession = userProfile.querySelector("#profession");
            var prfileEmail = userProfile.querySelector("#email");
            var prfileContact = userProfile.querySelector("#contact");

            ProfileName.innerHTML = "<input type='text' name='name' placeholder='Name' value='" + editedData.name + "' id='edit-name' class='edit-input'/>";
            prfileProfession.innerHTML = "<input type='text' name='' placeholder='Profession' value='" + editedData.profession + "' id='edit-profession' class='edit-input'/>";
            prfileEmail.innerHTML = "<input type='text' name='email' placeholder='Email' value='" + editedData.email + "' id='edit-email' class='edit-input'/>";
            prfileContact.innerHTML="<input type='number' placeholder ='Contact No' value='" + editedData.contact + "' id='edit-contact' class='edit-input'/>";
            // add event lisner for save button
            saveBtn.addEventListener("click", function () {
                var saveName = document.getElementById("edit-name");
                var saveProfession = document.getElementById("edit-profession");
                var saveEmail = document.getElementById("edit-email");
                var saveContact = document.getElementById("edit-contact");

                var userDisplayName = document.querySelectorAll("#user-display-name");

                editedData.name = saveName.value;
                editedData.profession = saveProfession.value;
                editedData.email = saveEmail.value;
                editedData.contact = saveContact.value;

                ProfileName.innerHTML = saveName.value;
                prfileProfession.innerHTML = saveProfession.value;
                prfileEmail.innerHTML = saveEmail.value;
                prfileContact.innerHTML = saveContact.value;
                // userDisplayName

                userDisplayName[indexNo].innerHTML = editedData.name;;
                saveBtn.style.display = 'none';
            })
        }

        // deletUser
        function deletUser(indexNo) {
            var deletAction = confirm(" you want to delet this user ? ")
            if (deletAction == true) {
                var userDisplayName = document.querySelectorAll("#user-display-name");
                if (indexNo > -1) {
                    userData.splice(indexNo, 1);
                    // var nodlistArr = Array.from(userDisplayName);
                    // nodlistArr.splice(indexNo, 1);
                    userDisplayName[indexNo].parentElement.remove();
                    userProfile.style.display = "none";
                }
            }
        }
    </script>
</body>
</html>